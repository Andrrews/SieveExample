@page "/"
@using Microsoft.AspNetCore.Components.Forms
@rendermode InteractiveServer
<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1><br/>

<div class="container" style="max-width:100%;margin-left:2em; margin-right:2em">
   
    <div class="row align-items-start" >

        <div class="col-8" style="width:65%;">
            <div class="row mb-2">
                <label for="inputEmail" class="col-sm-2 col-form-label" style="">Email</label>
                <div class="col" >
                    <input type="email" class="form-control" id="inputEmail" placeholder="Email" required>
                </div>
            </div>
            <div class="row mb-2">
                <label for="inputPassword" class="col-sm-2 col-form-label">Password</label>
                <div class="col">
                    <input type="password" class="form-control" id="inputPassword" placeholder="Password" required>
                </div>
            </div>
            <div class="row mb-2">
                <div class="col-sm-5 offset-sm-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="checkRemember">
                        <label class="form-check-label" for="checkRemember">Remember me</label>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-5 offset-sm-2">
                    <button type="submit" class="btn btn-primary">Sign in</button>
                </div>
            </div>
           

            </div>
            <div class="col-4" style="" >
                <div class="row mb-2">
      
                    <div class="col-12 text-center">
                        <div class="custom-file-upload" style="position: relative;">
                            <InputFile OnChange="PreviewImage" />
                            <label for="uploadImage" class="custom-file-label">Wgraj zdjęcie</label>
                            @if (!string.IsNullOrEmpty(previewImageUrl))
                            {
                            <img src="@previewImageUrl" alt="Twoje zdjęcie" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: auto; height: auto; max-width: 100%; max-height: 100%; object-fit: cover;" />

                            }
                        </div>
                    </div>
                </div>
             
            </div>
    </div>
</div>

<style>
    .custom-file-upload {
        position: relative;
        display: inline-block;
        width: 75%;
        height: 150px;
        border: 2px dashed #000;
        text-align: center;
        cursor: pointer;
    }

        .custom-file-upload input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

    .custom-file-label {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 16px;
        color: #000;
        pointer-events: none;
    }
</style>


@code {
    private string previewImageUrl;

    private async Task PreviewImage(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file != null)
        {
            using var stream = file.OpenReadStream(maxAllowedSize: 10 * 1024 * 1024); // 10 MB limit
            var buffer = new byte[file.Size];
            await stream.ReadAsync(buffer);
            previewImageUrl = $"data:{file.ContentType};base64,{Convert.ToBase64String(buffer)}";
        }
    }
}